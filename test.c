#include<stdio.h>
#include<string.h>
#include<stdlib.h>

int main(int argc, char* argv[])
{
	printf("size of an int: %ld \n", sizeof(int));
	char* message = argv[1];
	char buf[64];
	char* allowed_chars = (char *) malloc(8);
	    allowed_chars[0]  = 'a'; allowed_chars[1]  = 'A';
        allowed_chars[2]  = 'b'; allowed_chars[3]  = 'B';
        allowed_chars[4]  = 'c'; allowed_chars[5]  = 'C';
        allowed_chars[6]  = 'd'; allowed_chars[7]  = 'D';
	printf("address of allowed_chars: %p\n", allowed_chars);

	printf("allowed_chars:\n");
	printf("%x\n", allowed_chars[0]);
	printf("%x\n", allowed_chars[1]);
	printf("%x\n", allowed_chars[2]);
	printf("%x\n", allowed_chars[3]);
	printf("%x\n", allowed_chars[4]);
	printf("%x\n", allowed_chars[5]);
	printf("%x\n", allowed_chars[6]);
	printf("%x\n", allowed_chars[7]);

	snprintf(buf, sizeof(buf), "Checking \"%.31s\" against whitelist..\n", message);
	printf(buf);

	printf("after:\n");
	printf("%x\n", allowed_chars[0]);
	printf("%x\n", allowed_chars[1]);
	printf("%x\n", allowed_chars[2]);
	printf("%x\n", allowed_chars[3]);
	printf("%x\n", allowed_chars[4]);
	printf("%x\n", allowed_chars[5]);
	printf("%x\n", allowed_chars[6]);
	printf("%x\n", allowed_chars[7]);

	if( allowed_chars[0] != 0x61)
		system("/bin/SH");

}
